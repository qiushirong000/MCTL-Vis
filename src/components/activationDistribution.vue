<template>
    <div class="instance" ref="subcontainer">
      <el-header style="height:2vh; background-color: gainsboro;" v-if="showHeader">
        <el-row style="border: 0px solid #73ad21; height:100%;">
            <el-col :span="24">
              <div style="margin-top:4px; text-align: left; padding-left: 2em;"><label style="font-weight: bold; font-size: 15px;">{{title}}</label></div>

            </el-col>
        </el-row>
      </el-header>
      <div class="chart" ref="chart"></div>
    </div>

</template>

<script>
import { prepareBoxplotData } from 'echarts/extension/dataTool';

export default {
    name: 'activationDistribution',
    props: {
        title: {
            type: String,
            default: ''
        },
        height: {
            type: Number,
            default: 500
        },
        showHeader: {
            type: Boolean,
            required: true,
            default: false
        }
    },
    data () {
        return {
            myChart: null
        };
    },
    mounted () {
        // 设置视图高度
        this.$refs.subcontainer.style.height = this.height + 'vh';
        this.$refs.chart.style.height = this.showHeader ? (this.height - 2) + 'vh' : this.height + 'vh';
        // 绘制视图
        this.drawView();
    },
    methods: {
        prepareBoxplotData: function (data) {
            return prepareBoxplotData(data);
        },

        drawView () {
            if (this.$refs.chart === undefined) return;
            if (this.myChart === null) { this.myChart = this.$echarts.init(this.$refs.chart); }
            let rawSeries = [
                // [0.06847139373421669, 0.014690182998310774, 0.021591405849903822, -0.04740738719701767, -0.02344724126160145, 0.018793035065755248, -0.079169599711895, -0.1837330937385559, -0.2770216718316078, 0.024734341632574798, -0.01818770859390497, 0.004800704773515463, 0.05622425340116024, 0.0534405417740345, 0.02419809978455305, 0.010571797145530581, -0.01050891038030386, 0.02353001944720745, -0.03013459946960211, -0.00701105548068881, 0.10006301496177912, 0.03842350719496608, 0.01161971502006054, -0.00715490486472845, 0.05451891608536243, -0.30325360000133517, -0.011047734617022797, -0.033282581530511376, -0.044208043813705446, -0.07714116349816322, 0.0012403447646647692, -0.00897127902135253, -8.26212577521801e-05, -0.13788538798689842, -0.03522805832326412, -0.005368137918412686, -0.04817354828119278, -0.040729250945150855, -0.0060245396569371225, -0.1146178312599659, 0.08504232615232468, 0.03288285247981548, 0.0996231660246849, -0.024550599884241818, 0.16685265637934207, 0.02910991758108139, -0.037058455124497416, 0.040966246835887433, 0.3924554944038391, -0.012817578250542283, -0.10809576138854027, -0.2647575348615646, -0.009558649733662605, -0.009875524207018316, 0.06333743929862976, -0.014208536501973868, 0.002684902818873525, 0.056723903864622116, -0.06546740531921387, -0.005684026330709457, -0.0584161002188921, 0.0009731162339448929, -0.0693974394351244, 0.040116538479924205, -0.012722559133544564, 0.008629073202610017, -0.05157864168286323, -0.1588753417134285, 0.0328899122774601, -0.03109707348048687, 0.026102046528831125, -0.012689928896725178, -0.03935112003237009, -0.15940529406070708, -0.04038379294797778, 0.023235318111255766, -0.03847358711063862, -0.02664589462801814, 0.043193474411964417, -0.022809560317546128, -0.05762783531099558, -0.012296156212687492, 0.03374060725327581, -0.12268102914094925, -0.03420882821083069, 0.010099550103768706, 0.17528339624404907, 0.04762505069375038, 0.0041224139684345575, -0.020981814712285995, -0.1622043803334236, -0.06598954051733016, -0.11556185893714428, 0.01599789932370186, 0.004635278973728419, 0.014268461242318153, 0.025784285459667444, 0.07429767288267612, -0.11187483593821526],
                // [0.01266592349857092, -0.04881371073424816, -1.8590653780847787e-07, -0.02000720500946045, -0.05421274602413177, -0.001999237321433611, 0.026379513181746007, -0.056470829993486404, -0.11633240580558776, -0.3269621729850769, -0.031848523020744327, -0.017380525544285774, -0.004471906879916787, 0.055357007309794426, 0.04833421930670738, 0.05318894647061825, 0.03330353647470474, -0.002063881803769618, 0.028932171873748302, -0.026925436221063137, 0.08472195565700531, 0.07558612823486328, 0.03646695595234632, 0.02533488944172859, -0.03524213396012783, 0.039908504113554955, -0.3242031216621399, -0.015015837922692298, -0.036862007901072504, -0.029109620861709117, -0.02921680100262165, 0.026449006423354147, 0.04446451105177403, 0.027843156456947328, -0.17490656822919845, -0.03257047776132822, 0.04965890385210514, -0.017458577081561087, -0.017033827677369117, 0.030589995346963404, -0.10878027901053429, 0.07517740875482559, 0.04245412684977055, 0.144428251683712, 0.007129508926300332, 0.022318036668002604, -0.0045113023836165665, -0.013152131205424666, 0.006912347103934735, 0.3903521239757538, -0.037718360871076585, -0.09117134958505631, -0.26118285953998566, -0.0034269004478119313, 0.0025566099910065533, 0.02229362726211548, 0.021708301827311517, 0.001638654072303325, 0.04313595965504646, -0.0599044281989336, 0.021075435262173415, -0.06432709917426109, 0.02643701694905758, -0.1034157432615757, -0.03329391125589609, -0.02595471478998661, 0.039197712764143945, -0.04658435992896557, -0.1789773851633072, 0.06849150583148003, -0.024796492233872414, 0.0009426890603208449, -0.011487634293735028, -0.028676158376038076, -0.16615883260965347, -0.07839967682957649, 0.034418925270438196, 0.026361611485481263, -0.00886156242340803, 0.010061500524170697, -0.005196015816181898, -0.053876017779111864, -0.007592168683186173, -0.022453091107308865, -0.031844465108588335, 0.012598673906177282, -0.026115866377949715, 0.16072160601615906, 0.029546460881829262, 0.007283383794128895, -0.016822373121976854, -0.1428785279393196, -0.05627290084958077, -0.007801979652140289, 0.014393052458763123, -0.015527211595326662, 0.055670156702399255, 0.04110543429851532, -0.0033856885973364116, -0.061929115280509],
                [0.012989047169685363, -0.042491371557116506, -0.003728192369453609, -0.018870938941836356, -0.06095905527472496, 0.006612473912537098, 0.02489122487604618, -0.05683007501065731, -0.07008327841758728, -0.31816923022270205, -0.014308138843625784, -0.01683431873098016, -0.004193415539339185, 0.048187273740768435, 0.04708689004182816, 0.055997537821531294, 0.03534038476645947, 0.01433506067842245, 0.02733168490231037, -0.025562196783721448, 0.0816139206290245, 0.06508050188422203, 0.041626349091529846, 0.025809540413320065, -0.03427521884441376, 0.03500166237354278, -0.33770418763160703, -0.0164731134660542, -0.033431465923786166, -0.017856072541326283, -0.03179832920432091, 0.02598415929824114, 0.06072460487484932, 0.009776263777166606, -0.1950958251953125, -0.05089179277420044, 0.04969984404742718, -0.02458067797124386, -0.015435254666954279, 0.023849553614854812, -0.09737764820456504, 0.07209622338414193, 0.04400078020989895, 0.13806896954774855, -0.010603226558305322, 0.019791485741734505, 0.009627565322443844, 0.006075957021676004, 0.0018277055700309575, 0.38776142299175265, -0.04134693890810013, -0.08452246189117432, -0.2616908043622971, -0.0147960614413023, -0.0007636293914401904, 0.016128888912498952, 0.03653547950088978, -0.013174535520374776, 0.03915002755820751, -0.07289886698126793, 0.009569547604769468, -0.06384976208209991, 0.0246797913685441, -0.08276638016104698, -0.03584520295262337, -0.024414388835430144, 0.02936853263527155, -0.03733722567558288, -0.1509943947196007, 0.06706069558858871, -0.023019078001379967, -0.0012859071895945818, -0.011207574605941772, -0.032544109597802164, -0.1641121968626976, -0.07249144166707992, 0.03696082718670368, 0.02762397900223732, -0.0010017807042459026, -0.0007617905910592526, -0.006946611031889915, -0.033519326336681844, -0.00692752692848444, -0.038206815347075464, 0.013570519769564271, -0.0021320786792784928, -0.030636042170226575, 0.14719755798578263, 0.02394654545933008, 0.011469783633947373, -0.021826620772480966, -0.129903544485569, -0.042801153659820554, -0.003401639498770237, 0.016125427279621362],
                [0.004178166156634688, -0.0915651187300682, -0.01191559098660946, -0.016401324607431888, -0.05154794342815876, 0.020154989697039126, 0.022155682556331158, -0.04484874121844769, -0.0197721429169178, -0.30974521934986116, 0.018046566843986513, -0.007053055707365275, -0.009495486505329609, 0.042889414355158806, 0.04588247165083885],
                [0.0008493684465065599, -0.023691316414624453, 0.01453284836607054, 0.0007371601648628711, -0.025371916592121124, -0.01429458213970065, 0.005337721714749932, -0.05209875162690878, -0.19243397414684296, -0.2931771144270897, 0.01970088016241789, -0.02187996618449688, -0.0033086400479078295, 0.052691394463181496, 0.04968242309987545, 0.028666603844612837, 0.005163380363956094],
                [0.013304031360894442, -0.022314706072211265, -0.005739535670727491, -0.037627850845456126, -0.036602507904171945, 0.001517946441890672, 0.01803361214697361, -0.04187792614102363, -0.12820916026830673, -0.3398145347833633, -0.03063785843551159, -0.01159909451380372, -0.01123288506641984, 0.05452494956552982, 0.046044548600912096, 0.05433789156377315, 0.023070915974676608]
                // [0.008029861189424992, 0.05228524431586266, 0.007280966872349382, 0.07815949842333794, 0.060268734395503995, 0.03572818618267774, 0.02454977035522461, -0.03814894482493401, 0.03046714887022972]
            ];
            let BoxPlotData = this.prepareBoxplotData(rawSeries);
            // 指定图表的配置项和数据
            let option = {
                tooltip: {
                    trigger: 'item',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: '15%',
                    right: '10%',
                    height: '70%',
                    top: '16%'
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: true,
                    nameGap: 30,
                    splitArea: {
                        show: false
                    },
                    // data: ['3', '7', '77', '93', '94', '97', '98'], // 自定义 x 轴标签内容
                    data: ['14', '27', '73', '92'], // 自定义 x 轴标签内容
                    splitLine: {
                        show: false
                    }
                },
                yAxis: {
                    type: 'value',
                    name: '',
                    splitArea: {
                        show: false
                    }
                },
                series: [{
                    name: '数据',
                    type: 'boxplot',
                    data: BoxPlotData.boxData,
                    boxWidth: [5, 10]

                },
                {
                    name: 'outlier',
                    type: 'scatter',
                    data: BoxPlotData.outliers,
                    symbolSize: 4,
                    itemStyle: {
                        color: 'red'
                    }
                } ]
            };

            option && this.myChart.setOption(option);
        }
    }
};
</script>
<style scoped>
    .instance {
        border: 1px solid rgb(0, 0, 0);
        width: 100%;
        height: 30vh;
    }
    .chart {
        /* border: 1px solid gainsboro; */
        width: 100%;
        height: 27vh;
    }
</style>
